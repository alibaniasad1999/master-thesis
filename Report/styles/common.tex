
% -------------------------------------------------------
%  Common Styles and Formattings
% -------------------------------------------------------


\usepackage{amssymb,amsmath}
\usepackage[colorlinks,linkcolor=blue,citecolor=blue]{hyperref}
\usepackage[usenames,dvipsnames]{pstricks}
\usepackage{graphicx,subfigure,wrapfig}
\usepackage{geometry}
\usepackage[mathscr]{euscript}
\usepackage{graphicx,subfigure,wrapfig}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{tikz}
\usetikzlibrary{calc}
\usetikzlibrary{fit, positioning, shapes.geometric}
\usepackage{pgfplots}       % <-- required in preamble
\usepackage{siunitx}        % <-- required in preamble
\pgfplotsset{compat=newest} % <-- optional in preamble
\usepackage{subfiles}
\usepackage{scontents}
\usepackage{tikzviolinplots}
\tikzset{
	frame/.style={
		rectangle, draw,
		text width=6em, text centered,
		minimum height=4em,drop shadow,fill=white,
		rounded corners,
	},
	line/.style={
		draw, -{Latex},rounded corners=3mm,
	}
}
\usetikzlibrary{arrows.meta,shadows,positioning}
\usepackage[figureposition=bottom,tableposition=top,font={small,bf},labelfont=bf]{caption}

\usepackage{algorithmicx,algorithm}
\usepackage{varwidth}
\makeatletter
%\usepackage[ruled,vlined]{algorithm2e}

\usepackage[localise=on,extrafootnotefeatures]{xepersian}
\usepackage[noend]{algpseudocode}
\input{styles/alg-fa}

\usepackage{fontawesome5}

% Drawing
\usepackage{tikz}

% Tikz Library
\usetikzlibrary{calc, quotes, angles}

% Notation
\usepackage{physics, bm}

\usepackage{cite}
\usepackage{amsmath,amssymb,amsfonts}
\usepackage{textcomp}
\usepackage{xcolor}
\usepackage{tikz}
\usepackage{physics}
\usepackage{pgfplots}
\usepackage{pgfplotstable}
% \usepackage[sorting=none]{biblatex}
\usepgfplotslibrary{statistics}
\usepackage{etoolbox} % for \ifnumcomp
\usepackage{listofitems} % for \readlist to create arrays
% \usepackage[ruled,vlined]{algorithm% Increase row height
\renewcommand{\arraystretch}{1.4}

% Adjust column spacing
\setlength{\tabcolsep}{8pt}  % default is 6pt, increasing it for better spacing

\tikzset{>=latex} % for LaTeX arrow head
\colorlet{myred}{red!80!black}
\colorlet{myblue}{blue!80!black}
\colorlet{mygreen}{green!60!black}
\colorlet{mydarkred}{myred!40!black}
\colorlet{mydarkblue}{myblue!40!black}
\colorlet{mydarkgreen}{mygreen!40!black}
\tikzstyle{node}=[very thick,circle,draw=myblue,minimum size=22,inner sep=0.5,outer sep=0.6]
\tikzstyle{connect}=[->,thick,mydarkblue,shorten >=1]
\tikzset{ % node styles, numbered for easy mapping with \nstyle
  node 1/.style={node,mydarkgreen,draw=mygreen,fill=mygreen!25},
  node 2/.style={node,mydarkblue,draw=myblue,fill=myblue!20},
  node 3/.style={node,mydarkred,draw=myred,fill=myred!20},
}
\def\nstyle{int(\lay<\Nnodlen?min(2,\lay):3)} % map layer number onto 1, 2, or 3

\usetikzlibrary{arrows.meta,shadows,positioning}
\usetikzlibrary{calc}
\usetikzlibrary{fit, positioning, shapes.geometric}
\tikzset{
	frame/.style={
		rectangle, draw,
		text width=6em, text centered,
		minimum height=4em,drop shadow,fill=white,
		rounded corners,
	},
	line/.style={
		draw, -{Latex},rounded corners=3mm,
	}
}
% Tikz Library
\usetikzlibrary{calc, quotes, angles}
\pgfmathsetmacro{\r}{0.8}
\pgfmathsetmacro{\Phi}{-160}
\pgfmathsetmacro{\Theta}{-90}
\usepackage{fontawesome5}
\usepackage{float}
% -------------------- Page Layout --------------------


%\newgeometry{top=3cm,right=3cm,left=2.5cm,bottom=3cm,footskip=1.25cm}
\newgeometry{margin=1in,bottom=1.1in,footskip=.4in}

\renewcommand{\baselinestretch}{1.4}
\linespread{1.6}
\setlength{\parskip}{0.45em}

%\fancyhf{}
%\rhead{\leftmark}
%\lhead{\thepage}


% -------------------- Fonts --------------------

\settextfont[
Scale=1.09,
Extension=.ttf, 
Path=styles/fonts/,
BoldFont=Yas Bd,
ItalicFont=Yas It,
BoldItalicFont=Yas BdIt
]{Yas}


\ExplSyntaxOn
\cs_set_eq:NN
\etex_iffontchar:D
\tex_iffontchar:D
\cs_undefine:N \c_one
\int_const:Nn \c_one { 1 }
\ExplSyntaxOff
%\setdigitfont

%\setdigitfont[
%Scale=1.09,
%Extension=.ttf, 
%Path=styles/fonts/,
%BoldFont=Yas Bd,
%ItalicFont=Yas It,
%BoldItalicFont=Yas BdIt
%]{Yas}


\defpersianfont\sayeh[
Scale=1,
Path=styles/fonts/
]{XB Kayhan Pook}


% -------------------- Styles --------------------


\SepMark{-}
\renewcommand{\labelitemi}{$\small\bullet$}



% -------------------- Environments --------------------


\newtheorem{قضیه}{قضیه‌ی}[chapter]
\newtheorem{لم}[قضیه]{لم}
\newtheorem{ادعا}[قضیه]{ادعای}
\newtheorem{مشاهده}[قضیه]{مشاهده‌ی}
\newtheorem{نتیجه}[قضیه]{نتیجه‌ی}
\newtheorem{مسئله}{مسئله‌ی}[chapter]
\newtheorem{تعریف}{تعریف}[chapter]
\newtheorem{مثال}{مثال}[chapter]


\newenvironment{اثبات}
	{\begin{trivlist}\item[\hskip\labelsep{\em اثبات.}]}
	{\leavevmode\unskip\nobreak\quad\hspace*{\fill}{\ensuremath{{\square}}}\end{trivlist}}

\newenvironment{alg}[2]
	{\begin{latin}\settextfont[Scale=1.0]{Times New Roman}
	\begin{algorithm}[t]\caption{#1}\label{algo:#2}\vspace{0.2em}\begin{algorithmic}[1]}
	{\end{algorithmic}\vspace{0.2em}\end{algorithm}\end{latin}}


% -------------------- Titles --------------------


\renewcommand{\listfigurename}{فهرست شکل‌ها}
\renewcommand{\listtablename}{فهرست جدول‌ها}
\renewcommand{\bibname}{\rl{{مراجع}\hfill}} 


% -------------------- Commands --------------------


\newcommand{\IN}{\ensuremath{\mathbb{N}}} 
\newcommand{\IZ}{\ensuremath{\mathbb{Z}}} 
\newcommand{\IQ}{\ensuremath{\mathbb{Q}}} 
\newcommand{\IR}{\ensuremath{\mathbb{R}}} 
\newcommand{\IC}{\ensuremath{\mathbb{C}}} 

\newcommand{\set}[1]{\left\{ #1 \right\}}
\newcommand{\seq}[1]{\left< #1 \right>}
\newcommand{\ceil}[1]{\left\lceil{#1}\right\rceil}
\newcommand{\floor}[1]{\left\lfloor{#1}\right\rfloor}
\newcommand{\card}[1]{\left|{#1}\right|}
\newcommand{\setcomp}[1]{\overline{#1}}
\newcommand{\provided}{\,:\,}
\newcommand{\divs}{\mid}
\newcommand{\ndivs}{\nmid}
\newcommand{\iequiv}[1]{\,\overset{#1}{\equiv}\,}
\newcommand{\imod}[1]{\allowbreak\mkern5mu(#1\,\,\text{پیمانه‌ی})}

\newcommand{\poly}{\mathop{\mathrm{poly}}}
\newcommand{\polylog}{\mathop{\mathrm{polylog}}}
\newcommand{\eps}{\varepsilon}

\newcommand{\lee}{\leqslant}
\newcommand{\gee}{\geqslant}
\renewcommand{\leq}{\lee}
\renewcommand{\le}{\lee}
\renewcommand{\geq}{\gee}
\renewcommand{\ge}{\gee}

\newcommand{\مهم}[1]{\textbf{#1}}
\renewcommand{\برچسب}{\label}

\newcommand{\REM}[1]{}
\renewcommand{\حذف}{\REM}
\newcommand{\لر}{\lr}
\newcommand{\کد}[1]{\lr{\tt #1}}
\newcommand{\پاورقی}[1]{\footnote{\lr{#1}}}
\newcommand{\underE}[1]{\underset{#1}{\mathrm{E}}}



% -------------------- Dictionary --------------------


\newcommand{\dicalphabet}[1]{
\begin{minipage}{\columnwidth}
	\centerline{\noindent\textbf{\large #1 }}
	\vspace{.5em}
\end{minipage}
\nopagebreak[4]
}

\newcommand{\dic}[2]{\noindent  #2 \dotfill  \lr{#1} \\ }


% ------------------------------ Images and Figures --------------------------

\graphicspath{{figs/}}
\setlength{\intextsep}{0pt}  % for float boxes
\renewcommand{\psscalebox}[1]{}  % for LaTeX Draw

\newcommand{\floatbox}[2]
	{\begin{wrapfigure}{l}{#1}
	\centering #2 \end{wrapfigure}}

\newcommand{\centerfig}[2]
	{\centering\scalebox{#2}{\input{figs/#1}}}

\newcommand{\fig}[3]
	{\floatbox{#3}{\centerfig{#1}{#2}}}

\newcommand{\centerimg}[2]
	{\vspace{1em}\begin{center}\includegraphics[width=#2]{figs/#1}\end{center}\vspace{-1.5em}}

\NewDocumentCommand{\img}{m m o}
	{\begin{wrapfigure}{l}{\IfValueTF{#3}{#3}{#2}}
	\centering\includegraphics[width=#2]{figs/#1}\end{wrapfigure}}

\newcommand{\myviolinplot}[7]{%
	\begin{tikzpicture}
		\violinsetoptions[
		data points,
		scaled,
		]{
			xmin=#2,xmax=#3,
			ymin=#4,ymax=#5,
			title={},
			xlabel={},
			ylabel={Normalized Cumulative Reward},
			xlabel style={yshift = {-2*height("a")}},
			ymajorgrids=true,
		}
		\violinplotwholefile[%
		primary color=blue,
		secondary color=orange,
		indexes={#6},
		spacing=2.0,
		labels={%
			#7
		},
		col sep=space,
		dataset size=2pt,
		dataset mark=diamond*,
		dataset fill=blue!50!white,
		dataset fill opacity=1.0,
		]{#1}
	\end{tikzpicture}
} % end of \myviolinplot command
%% This is the vertical rule that is inserted
%\def\therule{\makebox[\algorithmicindent][l]{\hspace*{.5em}\vrule height .75\baselineskip depth .25\baselineskip}}%
%
%\newtoks\therules% Contains rules
%\therules={}% Start with empty token list
%\def\appendto#1#2{\expandafter#1\expandafter{\the#1#2}}% Append to token list
%\def\gobblefirst#1{% Remove (first) from token list
%	#1\expandafter\expandafter\expandafter{\expandafter\@gobble\the#1}}%
%\def\LState{\State\unskip\the\therules}% New line-state
%\def\pushindent{\appendto\therules\therule}%
%\def\popindent{\gobblefirst\therules}%
%\def\printindent{\unskip\the\therules}%
%\def\printandpush{\printindent\pushindent}%
%\def\popandprint{\popindent\printindent}%
%
%%      ***      DECLARED LOOPS      ***
%% (from algpseudocode.sty)
%\algdef{SE}[WHILE]{While}{EndWhile}[1]
%{\printandpush\algorithmicwhile\ #1\ \algorithmicdo}
%{\popandprint\algorithmicend\ \algorithmicwhile}%
%\algdef{SE}[FOR]{For}{EndFor}[1]
%{\printandpush\algorithmicfor\ #1\ \algorithmicdo}
%{\popandprint\algorithmicend\ \algorithmicfor}%
%\algdef{S}[FOR]{ForAll}[1]
%{\printindent\algorithmicforall\ #1\ \algorithmicdo}%
%\algdef{SE}[LOOP]{Loop}{EndLoop}
%{\printandpush\algorithmicloop}
%{\popandprint\algorithmicend\ \algorithmicloop}%
%\algdef{SE}[REPEAT]{Repeat}{Until}
%{\printandpush\algorithmicrepeat}[1]
%{\popandprint\algorithmicuntil\ #1}%
%\algdef{SE}[IF]{If}{EndIf}[1]
%{\printandpush\algorithmicif\ #1\ \algorithmicthen}
%{\popandprint\algorithmicend\ \algorithmicif}%
%\algdef{C}[IF]{IF}{ElsIf}[1]
%{\popandprint\pushindent\algorithmicelse\ \algorithmicif\ #1\ \algorithmicthen}%
%\algdef{Ce}[ELSE]{IF}{Else}{EndIf}
%{\popandprint\pushindent\algorithmicelse}%
%\algdef{SE}[PROCEDURE]{Procedure}{EndProcedure}[2]
%{\printandpush\algorithmicprocedure\ \textproc{#1}\ifthenelse{\equal{#2}{}}{}{(#2)}}%
%{\popandprint\algorithmicend\ \algorithmicprocedure}%
%\algdef{SE}[FUNCTION]{Function}{EndFunction}[2]
%{\printandpush\algorithmicfunction\ \textproc{#1}\ifthenelse{\equal{#2}{}}{}{(#2)}}%
%{\popandprint\algorithmicend\ \algorithmicfunction}%
%\makeatother
